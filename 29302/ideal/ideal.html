<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Speed Typing Race Game</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap");

      body,
      html {
        margin: 0;
        padding: 0;
        height: 100%;
        font-family: "Orbitron", sans-serif;
        overflow: hidden;
        background: #1a1a1a;
      }

      .game-container {
        position: relative;
        width: 100%;
        height: 100%;
        background: linear-gradient(to bottom, #2c3e50, #34495e);
      }

      .track {
        position: absolute;
        bottom: 20%;
        left: 0;
        width: 100%;
        height: 150px;
        background: #333;
        overflow: hidden;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
      }

      .track-line {
        position: absolute;
        top: 50%;
        left: 0;
        width: 200%;
        height: 10px;
        background: repeating-linear-gradient(
          90deg,
          white,
          white 50px,
          transparent 50px,
          transparent 100px
        );
        animation: moveTrack 5s linear infinite;
      }

      @keyframes moveTrack {
        0% {
          transform: translateX(0);
        }
        100% {
          transform: translateX(-50%);
        }
      }

      .car {
        position: absolute;
        bottom: 10px;
        width: 60px;
        height: 30px;
        background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30"><path d="M10,20 L15,10 L45,10 L50,20 Z" fill="red"/><circle cx="20" cy="20" r="5" fill="black"/><circle cx="40" cy="20" r="5" fill="black"/></svg>')
          no-repeat;
        transition: left 0.3s ease;
      }

      .player-car {
        left: 10%;
      }
      .cpu-car-1 {
        left: 10%;
        top: 40px;
      }
      .cpu-car-2 {
        left: 10%;
        top: 80px;
      }
      .cpu-car-3 {
        left: 10%;
        top: 120px;
      }

      .scoreboard {
        position: absolute;
        top: 10px;
        left: 10px;
        background: rgba(0, 0, 0, 0.8);
        color: #00ff00;
        padding: 15px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 255, 0, 0.5);
        font-size: 18px;
      }

      .typing-area {
        position: absolute;
        bottom: 10%;
        left: 50%;
        transform: translateX(-50%);
        width: 80%;
        background: rgba(0, 0, 0, 0.8);
        color: #00ff00;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 0 20px rgba(0, 255, 0, 0.5);
      }

      .passage {
        font-size: 24px;
        white-space: nowrap;
        overflow: hidden;
      }

      #userInput {
        width: 100%;
        font-size: 20px;
        padding: 10px;
        margin-top: 10px;
        background: #333;
        border: 2px solid #00ff00;
        color: #00ff00;
        border-radius: 5px;
      }

      .leaderboard {
        position: absolute;
        top: 10px;
        right: 10px;
        background: rgba(0, 0, 0, 0.8);
        color: #00ff00;
        padding: 15px;
        border-radius: 10px;
        max-height: 300px;
        overflow-y: auto;
        box-shadow: 0 0 10px rgba(0, 255, 0, 0.5);
      }

      .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
      }

      .modal-content {
        background-color: #000;
        color: #00ff00;
        margin: 15% auto;
        padding: 20px;
        border: 2px solid #00ff00;
        width: 300px;
        text-align: center;
        box-shadow: 0 0 20px #00ff00;
      }

      .close-button {
        color: #00ff00;
        float: right;
        font-size: 28px;
        font-weight: bold;
        cursor: pointer;
      }

      .close-button:hover {
        color: #00cc00;
      }

      @keyframes finishLine {
        0% {
          transform: scaleX(0);
        }
        100% {
          transform: scaleX(1);
        }
      }
      @media (max-width: 768px) {
        .typing-area {
          width: 90%;
        }
        .scoreboard,
        .leaderboard {
          font-size: 14px;
        }
      }
    </style>
  </head>
  <body>
    <div class="game-container">
      <div class="track">
        <div class="track-line"></div>
        <div class="car player-car"></div>
        <div class="car cpu-car-1"></div>
        <div class="car cpu-car-2"></div>
        <div class="car cpu-car-3"></div>
      </div>
      <div class="scoreboard">
        <div>Speed: <span id="speed">0</span> WPM</div>
        <div>Accuracy: <span id="accuracy">100</span>%</div>
        <div>Time: <span id="time">0</span>s</div>
      </div>
      <div class="typing-area">
        <div class="passage" id="passage"></div>
        <input type="text" id="userInput" placeholder="Start typing here..." />
      </div>
      <div class="leaderboard">
        <h3>Leaderboard</h3>
        <ol id="leaderboardList"></ol>
      </div>
    </div>

    <div id="usernameModal" class="modal">
      <div class="modal-content">
        <h2>Enter Your Username</h2>
        <input type="text" id="usernameInput" placeholder="Username" />
        <button id="startGameButton">Start Game</button>
      </div>
    </div>

    <div id="difficultyModal" class="modal">
      <div class="modal-content">
        <h2>Select Difficulty</h2>
        <button id="easyButton">Easy</button>
        <button id="mediumButton">Medium</button>
        <button id="hardButton">Hard</button>
      </div>
    </div>

    <script>
      // Game variables
      let passage =
        "The quick brown fox jumps over the lazy dog. This sentence is often used as a typing exercise because it contains every letter of the English alphabet. Typing practice is essential for improving your speed and accuracy on the keyboard. As you type more, you'll find that your fingers naturally move to the correct keys without you having to look down. This muscle memory is key to becoming a fast and efficient typist. Remember to maintain good posture and take breaks to prevent strain. Happy typing!";
      let currentIndex = 0;
      let startTime, endTime;
      let errors = 0;
      let playerSpeed = 0;
      let playerAccuracy = 100;
      let gameInterval;
      let username = "";
      let difficulty = "";
      let cpuSpeeds = [];

      // DOM elements
      const passageElement = document.getElementById("passage");
      const userInput = document.getElementById("userInput");
      const speedElement = document.getElementById("speed");
      const accuracyElement = document.getElementById("accuracy");
      const timeElement = document.getElementById("time");
      const leaderboardList = document.getElementById("leaderboardList");
      const usernameModal = document.getElementById("usernameModal");
      const usernameInput = document.getElementById("usernameInput");
      const startGameButton = document.getElementById("startGameButton");
      const difficultyModal = document.getElementById("difficultyModal");
      const easyButton = document.getElementById("easyButton");
      const mediumButton = document.getElementById("mediumButton");
      const hardButton = document.getElementById("hardButton");
      const playerCar = document.querySelector(".player-car");
      const cpuCars = document.querySelectorAll(
        ".cpu-car-1, .cpu-car-2, .cpu-car-3"
      );

      // Sound effects
      const correctSound = new Audio(
        "data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBTGH0fPTgjMGHm7A7+OZSA0PVqzn77BdGAg+ltryxnMpBSl+zPLaizsIGGS57OihUBELTKXh8bllHgU2jdXzzn0vBSF1xe/glEILElyx6OyrWBUIQ5zd8sFuJAUuhM/z1YU2Bhxqvu7mnEoODlOq5O+zYBoGPJPY88p2KwUme8rx3I4+CRZiturqpVITC0mi4PK8aB8GM4nU8tGAMQYeb8Lv45ZFDBFYr+ftrVoXCECY3PLEcSYELIHO8diJOQgZaLvt559NEAxPqOPwtmMcBjiP1/PMeS0GI3fH8N2RQAoUXrTp66hVFApGnt/yvmwhBTCG0fPTgjQGHW/A7eSaRw0PVqzl77BeGQc9ltvyxnUoBSh+zPDaizsIGGS56+mjTxELTKXh8bllHgU1jdT0z3wvBSJ0xe/glEILElyx6OyrWRUIRJve8sFuJAUug8/y1oU2Bhxqvu3mnEoPDlOq5O+zYRsGPJLZ88p3KgUme8rx3I4+CRVht+rqpVMSC0mh4fK8aiAFM4nU8tGAMQYfbsLv45ZFDBFYr+ftrVwWCECY3PLEcSYGK4DN8tiIOQgZZ7zs56BODwxPpuPxt2IdBjiP1/PMeywGI3fH8N+RQAoVXrPp66hWEwlGnt/yv2wiBDCG0fPTgzQHHG/A7eSaSQ0PVqvm77BeGQc9ltrzxnUoBSh9y/HajDsIF2W56+mjUREKTKPi8blnHgU1jdTy0HwvBSF0xPDglEQKElux6eyrWRUJQ5vd88FwJAQug8/y1oY2Bhxqvu3mnEwODVKp5e+zYRsGOpPX88p3KgUmecnw3Y4/CBVhtuvqpVMSC0mh4PG9aiAFM4nS89GAMgYfbsLu45dGCxFYrufurVwWCECX2/PEcicFKoDN8tiIOQgZZ7rs56BODwxPpuPxt2IdBjiP1/PMey4FI3bH8N+RQQkVXbPq66hWFQlEnN/yv2wiBDCG0PPTgzUGHG3A7uSaSQ0PVKzm7rJeGAc9ltrzyHQpBSh9y/HajDwIF2S46+mjUREKTKPi8blnHwU1jdTy0H4wBiF0xPDglEQKElux6eyrWxQJQ5vd88NvJAUtg87y1oY3Bxtpve3mnUsODlKp5PC1YRsHOpHY88p3LAUlecnw3Y8+CBZhtuvqpVMSDEig4PG9ayAGMojT89GBMQYfbcPu45dGDRBYrufurVwXB0CX2/PEcycFKoDM8tiKOAgZZrrs56BPEAxOpePxt2QcBzaN1vLNei4FI3bH79+RQQsUXbPq66pVFAlEm9/zv2wiBDCF0fLUgzUGHG3A7uSaSQ0PVKzm7rJfGQc8lNrzyHUpBSh9y/HajDwJFmS46+mjUhEKS6Li8bpoHwU1i9Ty0H4wBiFzxfDglUMMEVux5+2sWxQJQprd88NvJAUsgs/y1oY3Bxppve3mnUsODlKp5PC1YhsGOpHY88p5KwUlecnw3Y8+ChVgtunqp1QSDEif4PG9ayAGMojT89GBMgUfbcPu45lFDRBXr+furVwXB0CW3PPEcycFKn/M8tiKOQcZZrrt56BPEAxOpd/zueUdBzaM1vLNei4GInbH79+RQgsUXbLr66pVFAlEm9/zv24jBi+F0fLUhDQGHG3A7uSaSg0OVKzm7rJfGQc8lNn0yHUpBSh7yvLajT"
      );
      const wrongSound = new Audio(
        "data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBTGH0fPTgjMGHm7A7+OZSA0PVqzn77BdGAg+ltryxnMpBSl+zPLaizsIGGS57OihUBELTKXh8bllHgU2jdXzzn0vBSF1xe/glEILElyx6OyrWBUIQ5zd8sFuJAUuhM/z1YU2Bhxqvu7mnEoODlOq5O+zYBoGPJPY88p2KwUme8rx3I4+CRZiturqpVITC0mi4PK8aB8GM4nU8tGAMQYeb8Lv45ZFDBFYr+ftrVoXCECY3PLEcSYELIHO8diJOQgZaLvt559NEAxPqOPwtmMcBjiP1/PMeS0GI3fH8N2RQAoUXrTp66hVFApGnt/yvmwhBTCG0fPTgjQGHW/A7eSaRw0PVqzl77BeGQc9ltvyxnUoBSh+zPDaizsIGGS56+mjTxELTKXh8bllHgU1jdT0z3wvBSJ0xe/glEILElyx6OyrWRUIRJve8sFuJAUug8/y1oU2Bhxqvu3mnEoPDlOq5O+zYRsGPJLZ88p3KgUme8rx3I4+CRVht+rqpVMSC0mh4fK8aiAFM4nU8tGAMQYfbsLv45ZFDBFYr+ftrVwWCECY3PLEcSYGK4DN8tiIOQgZZ7zs56BODwxPpuPxt2IdBjiP1/PMeywGI3fH8N+RQAoVXrPp66hWEwlGnt/yv2wiBDCG0fPTgzQHHG/A7eSaSQ0PVqvm77BeGQc9ltrzxnUoBSh9y/HajDsIF2W56+mjUREKTKPi8blnHgU1jdTy0HwvBSF0xPDglEQKElux6eyrWRUJQ5vd88FwJAQug8/y1oY2Bhxqvu3mnEwODVKp5e+zYRsGOpPX88p3KgUmecnw3Y4/CBVhtuvqpVMSC0mh4PG9aiAFM4nS89GAMgYfbsLu45dGCxFYrufurVwWCECX2/PEcicFKoDN8tiIOQgZZ7rs56BODwxPpuPxt2IdBjiP1/PMey4FI3bH8N+RQQkVXbPq66hWFQlEnN/yv2wiBDCG0PPTgzUGHG3A7uSaSQ0PVKzm7rJeGAc9ltrzyHQpBSh9y/HajDwIF2S46+mjUREKTKPi8blnHwU1jdTy0H4wBiF0xPDglEQKElux6eyrWxQJQ5vd88NvJAUtg87y1oY3Bxtpve3mnUsODlKp5PC1YRsHOpHY88p3LAUlecnw3Y8+CBZhtuvqpVMSDEig4PG9ayAGMojT89GBMQYfbcPu45dGDRBYrufurVwXB0CX2/PEcycFKoDM8tiKOAgZZrrs56BPEAxOpePxt2QcBzaN1vLNei4FI3bH79+RQQsUXbPq66pVFAlEm9/zv2wiBDCF0fLUgzUGHG3A7uSaSQ0PVKzm7rJfGQc8lNrzyHUpBSh9y/HajDwJFmS46+mjUhEKS6Li8bpoHwU1i9Ty0H4wBiFzxfDglUMMEVux5+2sWxQJQprd88NvJAUsgs/y1oY3Bxppve3mnUsODlKp5PC1YhsGOpHY88p5KwUlecnw3Y8+ChVgtunqp1QSDEif4PG9ayAGMojT89GBMgUfbcPu45lFDRBXr+furVwXB0CW3PPEcycFKn/M8tiKOQcZZrrt56BPEAxOpd/zueUdBzaM1vLNei4GInbH79+RQgsUXbLr66pVFAlEm9/zv24jBi+F0fLUhDQGHG3A7uSaSg0OVKzm7rJfGQc8lNn0yHUpBSh7yvLajT"
      );
      const finishSound = new Audio(
        "data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBTGH0fPTgjMGHm7A7+OZSA0PVqzn77BdGAg+ltryxnMpBSl+zPLaizsIGGS57OihUBELTKXh8bllHgU2jdXzzn0vBSF1xe/glEILElyx6OyrWBUIQ5zd8sFuJAUuhM/z1YU2Bhxqvu7mnEoODlOq5O+zYBoGPJPY88p2KwUme8rx3I4+CRZiturqpVITC0mi4PK8aB8GM4nU8tGAMQYeb8Lv45ZFDBFYr+ftrVoXCECY3PLEcSYELIHO8diJOQgZaLvt559NEAxPqOPwtmMcBjiP1/PMeS0GI3fH8N2RQAoUXrTp66hVFApGnt/yvmwhBTCG0fPTgjQGHW/A7eSaRw0PVqzl77BeGQc9ltvyxnUoBSh+zPDaizsIGGS56+mjTxELTKXh8bllHgU1jdT0z3wvBSJ0xe/glEILElyx6OyrWRUIRJve8sFuJAUug8/y1oU2Bhxqvu3mnEoPDlOq5O+zYRsGPJLZ88p3KgUme8rx3I4+CRVht+rqpVMSC0mh4fK8aiAFM4nU8tGAMQYfbsLv45ZFDBFYr+ftrVwWCECY3PLEcSYGK4DN8tiIOQgZZ7zs56BODwxPpuPxt2IdBjiP1/PMeywGI3fH8N+RQAoVXrPp66hWEwlGnt/yv2wiBDCG0fPTgzQHHG/A7eSaSQ0PVqvm77BeGQc9ltrzxnUoBSh9y/HajDsIF2W56+mjUREKTKPi8blnHgU1jdTy0HwvBSF0xPDglEQKElux6eyrWRUJQ5vd88FwJAQug8/y1oY2Bhxqvu3mnEwODVKp5e+zYRsGOpPX88p3KgUmecnw3Y4/CBVhtuvqpVMSC0mh4PG9aiAFM4nS89GAMgYfbsLu45dGCxFYrufurVwWCECX2/PEcicFKoDN8tiIOQgZZ7rs56BODwxPpuPxt2IdBjiP1/PMey4FI3bH8N+RQQkVXbPq66hWFQlEnN/yv2wiBDCG0PPTgzUGHG3A7uSaSQ0PVKzm7rJeGAc9ltrzyHQpBSh9y/HajDwIF2S46+mjUREKTKPi8blnHwU1jdTy0H4wBiF0xPDglEQKElux6eyrWxQJQ5vd88NvJAUtg87y1oY3Bxtpve3mnUsODlKp5PC1YRsHOpHY88p3LAUlecnw3Y8+CBZhtuvqpVMSDEig4PG9ayAGMojT89GBMQYfbcPu45dGDRBYrufurVwXB0CX2/PEcycFKoDM8tiKOAgZZrrs56BPEAxOpePxt2QcBzaN1vLNei4FI3bH79+RQQsUXbPq66pVFAlEm9/zv2wiBDCF0fLUgzUGHG3A7uSaSQ0PVKzm7rJfGQc8lNrzyHUpBSh9y/HajDwJFmS46+mjUhEKS6Li8bpoHwU1i9Ty0H4wBiFzxfDglUMMEVux5+2sWxQJQprd88NvJAUsgs/y1oY3Bxppve3mnUsODlKp5PC1YhsGOpHY88p5KwUlecnw3Y8+ChVgtunqp1QSDEif4PG9ayAGMojT89GBMgUfbcPu45lFDRBXr+furVwXB0CW3PPEcycFKn/M8tiKOQcZZrrt56BPEAxOpd/zueUdBzaM1vLNei4GInbH79+RQgsUXbLr66pVFAlEm9/zv24jBi+F0fLUhDQGHG3A7uSaSg0OVKzm7rJfGQc8lNn0yHUpBSh7yvLajT"
      );

      // Initialize game
      function initGame() {
        usernameModal.style.display = "block";
      }

      // Start game
      function startGame() {
        usernameModal.style.display = "none";
        difficultyModal.style.display = "block";
      }

      // Set difficulty
      function setDifficulty(level) {
        difficulty = level;
        difficultyModal.style.display = "none";
        startRace();
      }

      // Start the race
      function startRace() {
        startTime = new Date();
        updatePassage();
        userInput.focus();
        gameInterval = setInterval(updateGame, 100);

        // Set up CPU opponents based on difficulty
        switch (difficulty) {
          case "easy":
            cpuSpeeds = [30];
            cpuCars[1].style.display = "none";
            cpuCars[2].style.display = "none";
            break;
          case "medium":
            cpuSpeeds = [35, 40];
            cpuCars[2].style.display = "none";
            break;
          case "hard":
            cpuSpeeds = [40, 45, 50];
            break;
        }
      }

      // Update passage display
      function updatePassage() {
        const words = passage.split(" ");
        const displayWords = words
          .slice(currentIndex, currentIndex + 10)
          .join(" ");
        passageElement.textContent = displayWords;
      }

      // Check user input
      userInput.addEventListener("input", function () {
        const currentWord = passage.split(" ")[currentIndex];
        if (this.value.endsWith(" ")) {
          if (this.value.trim() === currentWord) {
            correctSound.play();
            currentIndex++;
            this.value = "";
            updatePassage();
            updateSpeed();
          } else {
            wrongSound.play();
            errors++;
            this.value = "";
          }
          updateAccuracy();
        }
      });

      // Update game state
      function updateGame() {
        const elapsedTime = (new Date() - startTime) / 1000;
        timeElement.textContent = elapsedTime.toFixed(1);

        // Update player car position
        const progress = (currentIndex / passage.split(" ").length) * 100;
        playerCar.style.left = `${Math.min(progress, 90)}%`;

        // Update CPU car positions
        cpuCars.forEach((car, index) => {
          if (index < cpuSpeeds.length) {
            const cpuProgress =
              (cpuSpeeds[index] * elapsedTime) /
              60 /
              (passage.split(" ").length / 100);
            car.style.left = `${Math.min(cpuProgress, 90)}%`;
          }
        });

        // Check for race completion
        if (currentIndex >= passage.split(" ").length) {
          endGame();
        }
      }
      // Update typing speed
      function updateSpeed() {
        const elapsedMinutes = (new Date() - startTime) / 60000;
        playerSpeed = Math.round(currentIndex / elapsedMinutes);
        speedElement.textContent = playerSpeed;
      }

      // Update accuracy
      function updateAccuracy() {
        const totalCharacters = passage.slice(0, currentIndex).length;
        playerAccuracy = Math.round(
          ((totalCharacters - errors) / totalCharacters) * 100
        );
        accuracyElement.textContent = playerAccuracy;
      }

      // End game
      function endGame() {
        clearInterval(gameInterval);
        finishSound.play();
        const finalTime = (new Date() - startTime) / 1000;

        // Show finish line animation
        showFinishLineAnimation();

        // Update leaderboard
        updateLeaderboard(username, playerSpeed, playerAccuracy, finalTime);

        // Show game over modal
        showGameOverModal(finalTime);
      }

      // Show finish line animation
      function showFinishLineAnimation() {
        const finishLine = document.createElement("div");
        finishLine.style.position = "absolute";
        finishLine.style.right = "0";
        finishLine.style.top = "0";
        finishLine.style.bottom = "0";
        finishLine.style.width = "10px";
        finishLine.style.background =
          "repeating-linear-gradient(45deg, black, black 10px, white 10px, white 20px)";
        finishLine.style.animation = "finishLine 0.5s linear";
        document.querySelector(".track").appendChild(finishLine);

        // Remove finish line after animation
        setTimeout(() => {
          finishLine.remove();
        }, 500);
      }

      // Update leaderboard
      function updateLeaderboard(username, speed, accuracy, time) {
        const leaderboardEntry = { username, speed, accuracy, time };
        leaderboard.push(leaderboardEntry);
        leaderboard.sort((a, b) => b.speed - a.speed);
        leaderboard = leaderboard.slice(0, 10); // Keep top 10

        // Update leaderboard display
        leaderboardList.innerHTML = "";
        leaderboard.forEach((entry, index) => {
          const li = document.createElement("li");
          li.textContent = `${index + 1}. ${entry.username}: ${
            entry.speed
          } WPM, ${entry.accuracy}% accuracy, ${entry.time.toFixed(1)}s`;
          leaderboardList.appendChild(li);
        });
      }

      // Show game over modal
      function showGameOverModal(finalTime) {
        const gameOverModal = document.createElement("div");
        gameOverModal.className = "modal";
        gameOverModal.innerHTML = `
            <div class="modal-content">
                <h2>Race Finished!</h2>
                <p>Your Speed: ${playerSpeed} WPM</p>
                <p>Your Accuracy: ${playerAccuracy}%</p>
                <p>Your Time: ${finalTime.toFixed(1)} seconds</p>
                <button id="playAgainButton">Play Again</button>
            </div>
        `;
        document.body.appendChild(gameOverModal);

        document
          .getElementById("playAgainButton")
          .addEventListener("click", () => {
            gameOverModal.remove();
            resetGame();
          });
      }

      // Reset game
      function resetGame() {
        currentIndex = 0;
        errors = 0;
        playerSpeed = 0;
        playerAccuracy = 100;
        updatePassage();
        speedElement.textContent = "0";
        accuracyElement.textContent = "100";
        timeElement.textContent = "0.0";
        userInput.value = "";
        playerCar.style.left = "10%";
        cpuCars.forEach((car) => (car.style.left = "10%"));
        initGame();
      }

      // Event listeners
      startGameButton.addEventListener("click", () => {
        username = usernameInput.value.trim();
        if (username) {
          startGame();
        } else {
          alert("Please enter a username");
        }
      });

      easyButton.addEventListener("click", () => setDifficulty("easy"));
      mediumButton.addEventListener("click", () => setDifficulty("medium"));
      hardButton.addEventListener("click", () => setDifficulty("hard"));

      // Responsive design for mobile
      function handleResize() {
        const gameContainer = document.querySelector(".game-container");
        if (window.innerWidth < 768) {
          gameContainer.style.fontSize = "14px";
          userInput.style.fontSize = "16px";
        } else {
          gameContainer.style.fontSize = "18px";
          userInput.style.fontSize = "20px";
        }
      }

      window.addEventListener("resize", handleResize);
      handleResize();

      // Initialize the game
      initGame();
    </script>
  </body>
</html>
