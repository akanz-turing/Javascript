<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quantitative Comparison Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <style>
      .dark {
        background-color: #1a202c;
        color: #e2e8f0;
      }
    </style>
  </head>
  <body class="font-sans transition-colors duration-300">
    <div class="container mx-auto px-4 py-8">
      <h1 class="text-3xl font-bold mb-4">Quantitative Comparison Test</h1>
      <button
        id="darkModeToggle"
        class="mb-4 px-4 py-2 bg-gray-200 dark:bg-gray-700 rounded"
      >
        Toggle Dark Mode
      </button>

      <div id="quizContainer" class="hidden">
        <div
          id="progressBar"
          class="w-full bg-gray-200 rounded-full h-2.5 mb-4 dark:bg-gray-700"
        >
          <div
            id="progressBarFill"
            class="bg-blue-600 h-2.5 rounded-full"
            style="width: 0%"
          ></div>
        </div>
        <p id="questionNumber" class="text-lg mb-2">Question 1 of 10</p>
        <div id="timer" class="text-xl mb-4">Time left: 60s</div>
        <div id="question" class="mb-4"></div>
        <div id="options" class="space-y-2 mb-4"></div>
        <div
          id="explanation"
          class="hidden mb-4 p-4 bg-gray-100 dark:bg-gray-800 rounded"
        ></div>
        <button
          id="nextButton"
          class="px-4 py-2 bg-blue-500 text-white rounded hidden"
        >
          Next Question
        </button>
      </div>

      <div id="startQuiz" class="text-center">
        <p class="mb-4">
          Welcome to the Quantitative Comparison Test! You will have 60 seconds
          for each question. Good luck!
        </p>
        <button
          id="startButton"
          class="px-4 py-2 bg-green-500 text-white rounded"
        >
          Start Quiz
        </button>
      </div>

      <div id="summary" class="hidden">
        <h2 class="text-2xl font-bold mb-4">Quiz Summary</h2>
        <p id="totalQuestions"></p>
        <p id="correctAnswers"></p>
        <p id="incorrectAnswers"></p>
        <p id="score"></p>
        <p id="totalTime"></p>
        <button
          id="reviewButton"
          class="mt-4 px-4 py-2 bg-blue-500 text-white rounded"
        >
          Review Incorrect Answers
        </button>
      </div>
    </div>

    <script>
      const questions = [
        {
          question: "Compare the quantities in Column A and Column B:",
          columnA:
            "Moira's share when the revenue generated by Company X is $15,700 (Company X splits revenue in a 6:5 ratio between two partners)",
          columnB: "$7,900",
          correctAnswer: 1,
          explanation:
            "Moira's share is calculated by dividing $15,700 in a 6:5 ratio. Moira's portion = (5/11) * $15,700 = $7,136.36, which is less than $7,900. Therefore, the quantity in Column B is greater.",
        },
        {
          question: "Compare the quantities in Column A and Column B:",
          columnA:
            "Price of sneakers after a 20% increase followed by a 15% discount",
          columnB: "Original price of sneakers",
          correctAnswer: 2,
          explanation:
            "Let's assume the original price is x. After a 20% increase, the price becomes 1.2x. Then, after a 15% discount, it becomes 1.2x * 0.85 = 1.02x. This is 2% more than the original price, so Column A is greater.",
        },
        // Add more questions here...
      ];

      let currentQuestion = 0;
      let score = 0;
      let timer;
      let timeLeft = 60;
      let quizStartTime;
      let questionTimes = [];

      const quizContainer = document.getElementById("quizContainer");
      const startQuiz = document.getElementById("startQuiz");
      const summary = document.getElementById("summary");
      const questionElement = document.getElementById("question");
      const optionsElement = document.getElementById("options");
      const explanationElement = document.getElementById("explanation");
      const nextButton = document.getElementById("nextButton");
      const timerElement = document.getElementById("timer");
      const progressBarFill = document.getElementById("progressBarFill");
      const questionNumberElement = document.getElementById("questionNumber");

      document
        .getElementById("startButton")
        .addEventListener("click", startQuiz);
      nextButton.addEventListener("click", nextQuestion);
      document
        .getElementById("darkModeToggle")
        .addEventListener("click", toggleDarkMode);

      function startQuiz() {
        quizStartTime = new Date();
        startQuiz.classList.add("hidden");
        quizContainer.classList.remove("hidden");
        loadQuestion();
      }

      function loadQuestion() {
        if (currentQuestion >= questions.length) {
          showSummary();
          return;
        }

        const question = questions[currentQuestion];
        questionElement.innerHTML = `
                <p class="mb-2">${question.question}</p>
                <div class="grid grid-cols-2 gap-4">
                    <div class="p-4 bg-gray-100 dark:bg-gray-800 rounded">
                        <h3 class="font-bold">Column A</h3>
                        <p>${question.columnA}</p>
                    </div>
                    <div class="p-4 bg-gray-100 dark:bg-gray-800 rounded">
                        <h3 class="font-bold">Column B</h3>
                        <p>${question.columnB}</p>
                    </div>
                </div>
            `;

        const options = [
          "The quantity in Column A is greater.",
          "The quantity in Column B is greater.",
          "The two quantities are equal.",
          "The relationship cannot be determined from the information given.",
        ];

        optionsElement.innerHTML = options
          .map(
            (option, index) => `
                <button class="w-full text-left px-4 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded option-button" data-index="${
                  index + 1
                }">
                    ${option}
                </button>
            `
          )
          .join("");

        document.querySelectorAll(".option-button").forEach((button) => {
          button.addEventListener("click", selectAnswer);
        });

        explanationElement.classList.add("hidden");
        nextButton.classList.add("hidden");
        timeLeft = 60;
        updateTimer();
        timer = setInterval(updateTimer, 1000);

        questionNumberElement.textContent = `Question ${
          currentQuestion + 1
        } of ${questions.length}`;
        updateProgressBar();
      }

      function selectAnswer(e) {
        clearInterval(timer);
        const selectedAnswer = parseInt(e.target.dataset.index);
        const question = questions[currentQuestion];

        document.querySelectorAll(".option-button").forEach((button) => {
          button.disabled = true;
          if (parseInt(button.dataset.index) === question.correctAnswer) {
            button.classList.add("bg-green-200", "dark:bg-green-800");
          } else if (parseInt(button.dataset.index) === selectedAnswer) {
            button.classList.add("bg-red-200", "dark:bg-red-800");
          }
        });

        if (selectedAnswer === question.correctAnswer) {
          score++;
        }

        explanationElement.innerHTML = question.explanation;
        explanationElement.classList.remove("hidden");
        nextButton.classList.remove("hidden");

        questionTimes.push(60 - timeLeft);

        anime({
          targets: explanationElement,
          opacity: [0, 1],
          translateY: [20, 0],
          duration: 500,
          easing: "easeOutQuad",
        });
      }

      function nextQuestion() {
        currentQuestion++;
        loadQuestion();
      }

      function updateTimer() {
        timeLeft--;
        timerElement.textContent = `Time left: ${timeLeft}s`;
        if (timeLeft <= 0) {
          clearInterval(timer);
          nextQuestion();
        }
      }

      function updateProgressBar() {
        const progress = ((currentQuestion + 1) / questions.length) * 100;
        progressBarFill.style.width = `${progress}%`;
      }

      function showSummary() {
        quizContainer.classList.add("hidden");
        summary.classList.remove("hidden");

        const totalTime = Math.round((new Date() - quizStartTime) / 1000);
        const averageTime = Math.round(
          questionTimes.reduce((a, b) => a + b, 0) / questionTimes.length
        );

        document.getElementById(
          "totalQuestions"
        ).textContent = `Total questions: ${questions.length}`;
        document.getElementById(
          "correctAnswers"
        ).textContent = `Correct answers: ${score}`;
        document.getElementById(
          "incorrectAnswers"
        ).textContent = `Incorrect answers: ${questions.length - score}`;
        document.getElementById("score").textContent = `Score: ${Math.round(
          (score / questions.length) * 100
        )}%`;
        document.getElementById(
          "totalTime"
        ).textContent = `Total time: ${totalTime}s (Average: ${averageTime}s per question)`;

        document
          .getElementById("reviewButton")
          .addEventListener("click", reviewIncorrectAnswers);
      }

      function reviewIncorrectAnswers() {
        // Implement the review functionality here
        console.log("Review functionality to be implemented");
      }

      function toggleDarkMode() {
        document.body.classList.toggle("dark");
      }
    </script>
  </body>
</html>
